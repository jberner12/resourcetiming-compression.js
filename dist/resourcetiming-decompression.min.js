!function(e){"use strict";void 0!==e&&(r=(t=e).ResourceTimingDecompression);var t,r,u={};u.HOSTNAMES_REVERSED=!0,u.INITIATOR_TYPES={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6,image:7,beacon:8,fetch:9,iframe:"a",subdocument:"a",body:"b",input:"c",frame:"a",object:"d",video:"e",audio:"f",source:"g",track:"h",embed:"i",eventsource:"j",navigation:6},u.DIMENSION_NAMES={height:0,width:1,y:2,x:3,naturalHeight:4,naturalWidth:5},u.SCRIPT_ATTRIBUTES={scriptAsync:1,scriptDefer:2,scriptBody:4},u.REL_TYPES={prefetch:1,preload:2,prerender:3,stylesheet:4},u.getRevMap=function(e){var t,r={};for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[e[t]]=t);return r},u.REV_INITIATOR_TYPES=u.getRevMap(u.INITIATOR_TYPES),u.REV_DIMENSION_NAMES=u.getRevMap(u.DIMENSION_NAMES),u.REV_SCRIPT_ATTRIBUTES=u.getRevMap(u.SCRIPT_ATTRIBUTES),u.REV_REL_TYPES=u.getRevMap(u.REL_TYPES),u.SPECIAL_DATA_PREFIX="*",u.SPECIAL_DATA_DIMENSION_TYPE="0",u.SPECIAL_DATA_DIMENSION_PREFIX=u.SPECIAL_DATA_PREFIX+u.SPECIAL_DATA_DIMENSION_TYPE,u.SPECIAL_DATA_SIZE_TYPE="1",u.SPECIAL_DATA_SCRIPT_TYPE="2",u.SPECIAL_DATA_SERVERTIMING_TYPE="3",u.SPECIAL_DATA_LINK_ATTR_TYPE="4",u.SPECIAL_DATA_NAMESPACED_TYPE="5",u.SPECIAL_DATA_SERVICE_WORKER_TYPE="6",u.HOSTNAME_REGEX=/^(https?:\/\/)([^/]+)(.*)/,u.SPECIAL_DATA_PROTOCOL="7",u.searchSortedFirst=function(e,t,r){if(!e||0===e.length)return-1;t=(r=r||function(e){return e})(t);for(var s,n=-1,o=e.length;n<o-1;)r(e[s=n+o>>>1])<t?n=s:o=s;return o},u.searchSortedLast=function(e,t,r){if(!e||0===e.length)return-1;t=(r=r||function(e){return e})(t);for(var s,n=-1,o=e.length;n<o-1;)t<r(e[s=n+o>>>1])?o=s:n=s;return n},u.noConflict=function(){return t.ResourceTimingDecompression=r,u},u.decompressResources=function(e,t,r){var s,n,o=[];for(n in r=r||"",e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=e[n],a=r+n;if(-1!==a.indexOf("|",a.length-1)&&(a=a.substring(0,a.length-1)),"string"==typeof i){var c=i.split("|");if(0!==c.length){s=void 0,this.isDimensionData(c[0])&&(s=this.decompressDimension(c[0]),c=c.splice(1));for(var p=0;p<c.length;p++){var d=c[p];0<d.length&&d[0]===u.SPECIAL_DATA_PREFIX||o.push(this.addDimension(this.decodeCompressedResource(d,a,t),s))}}}else i=this.decompressResources(i,t,a),o=o.concat(i)}return o},u.isDimensionData=function(e){return e&&e.substring(0,u.SPECIAL_DATA_DIMENSION_PREFIX.length)===u.SPECIAL_DATA_DIMENSION_PREFIX},u.decompressDimension=function(e){var t,r,s={};if(this.isDimensionData(e)&&!((t=(e=e.substring(u.SPECIAL_DATA_DIMENSION_PREFIX.length)).split(",")).length<2)){for(s.y=0,r=s.x=0;r<t.length;r++)""===t[r]?s[this.REV_DIMENSION_NAMES[r]]=0:s[this.REV_DIMENSION_NAMES[r]]=parseInt(t[r],36);Object.prototype.hasOwnProperty.call(s,"naturalHeight")||(s.naturalHeight=s.height),Object.prototype.hasOwnProperty.call(s,"naturalWidth")||(s.naturalWidth=s.width)}return s},u.addDimension=function(e,t){if(e&&t)for(var r in this.DIMENSION_NAMES)Object.prototype.hasOwnProperty.call(this.DIMENSION_NAMES,r)&&Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},u.getSortedCells=function(e){for(var t=[],r=0;r<e.length;r++)e[r].responseEnd<=e[r].startTime||(t.push({ts:e[r].startTime,val:1}),t.push({ts:e[r].responseEnd,val:-1}));return t.sort(function(e,t){return e.ts-t.ts}),t},u.addCellContributions=function(e){for(var t,r=0,s=[],n=e[0].ts,o=e.length,i={},a=0;a<o;a++)i=e[a],a<o-1&&e[a+1].ts===i.ts?(e[a+1].val+=i.val,s.push(a)):(t=i.val,0<r&&(i.val=(i.ts-n)/r),n=i.ts,r+=t);for(a=s.length-1;0<=a;a--)e.splice(s[a],1);return e},u.sumContributions=function(e,t){if(!t||void 0===t.startTime||void 0===t.responseEnd)return 0;var r=t.startTime+1,t=t.responseEnd;function s(e){return e.ts}for(var r=this.searchSortedFirst(e,{ts:r},s),n=this.searchSortedLast(e,{ts:t},s),o=0,i=r;i<=n;i++)o+=e[i].val;return o},u.addContribution=function(e){if(e&&0!==e.length){var t=this.getSortedCells(e);if(!(t.length<2||t[0].val<1||t[t.length-1].ts<=0)){this.addCellContributions(t);for(var r=t[t.length-1].ts,s=0;s<e.length;s++)e[s].contribution=this.sumContributions(t,e[s])/r}}return e},u.getInitiatorTypeFromIndex=function(e){return Object.prototype.hasOwnProperty.call(this.REV_INITIATOR_TYPES,e)?this.REV_INITIATOR_TYPES[e]:"other"},u.decodeCompressedResource=function(e,t,r){if(!e||!t)return{};u.HOSTNAMES_REVERSED&&(t=u.reverseHostname(t));for(var s=isNaN(parseInt(e[0],10))?e[0]:parseInt(e[0],10),n=0<(e=1<e.length?e.split(u.SPECIAL_DATA_PREFIX):[]).length&&1<e[0].length?e[0].substring(1).split(","):[],o=1<e.length?e.slice(1):[],i=0;i<n.length;i++)""===n[i]?n[i]=0:n[i]=parseInt(n[i],36);var e=1<=n.length?n[0]:0,a=n.length<10?e:this.decodeCompressedResourceTimeStamp(n,9,e),c={name:t,initiatorType:this.getInitiatorTypeFromIndex(s),startTime:e,redirectStart:0<this.decodeCompressedResourceTimeStamp(n,9,e)?e:0,redirectEnd:this.decodeCompressedResourceTimeStamp(n,9,e),fetchStart:a,domainLookupStart:this.decodeCompressedResourceTimeStamp(n,8,e),domainLookupEnd:this.decodeCompressedResourceTimeStamp(n,7,e),connectStart:this.decodeCompressedResourceTimeStamp(n,6,e),secureConnectionStart:this.decodeCompressedResourceTimeStamp(n,5,e),connectEnd:this.decodeCompressedResourceTimeStamp(n,4,e),requestStart:this.decodeCompressedResourceTimeStamp(n,3,e),responseStart:this.decodeCompressedResourceTimeStamp(n,2,e),responseEnd:this.decodeCompressedResourceTimeStamp(n,1,e)};for(c.duration=0<c.responseEnd?c.responseEnd-c.startTime:0,i=0;i<o.length;i++)this.decompressSpecialData(o[i],c,r);return c},u.decodeCompressedResourceTimeStamp=function(e,t,r){return e&&e.length>=t+1&&0!==e[t]?e[t]+r:0},u.decompressScriptType=function(e,t){var r,s=parseInt(e,10);for(r in t=t||{},this.SCRIPT_ATTRIBUTES)Object.prototype.hasOwnProperty.call(this.SCRIPT_ATTRIBUTES,r)&&(t[r]=(s&this.SCRIPT_ATTRIBUTES[r])===this.SCRIPT_ATTRIBUTES[r]);return t},u.decompressLinkAttrType=function(e,t){e=parseInt(e,10);return t=t||{},Object.prototype.hasOwnProperty.call(this.REV_REL_TYPES,e)&&(t.rel=this.REV_REL_TYPES[e]),t},u.decompressSize=function(e,t){var r,s;for(void 0===t&&(t={}),r=e.split(","),s=0;s<r.length;s++)"_"===r[s]?r[s]=0:(""===r[s]&&(r[s]=0),r[s]=parseInt(r[s],36),0<s&&(r[s]+=r[0]));return 1===r.length&&r.push(r[0]),2===r.length&&r.push(r[0]),t.encodedBodySize=r[0],t.transferSize=r[1],t.decodedBodySize=r[2],t},u.decompressNamespacedData=function(e,t){var r,s;return t=t||{},"string"==typeof e&&0<(r=e.indexOf(":"))&&(s=e.substring(0,r),e=e.substring(r+":".length),t._data=t._data||{},Object.prototype.hasOwnProperty.call(t._data,s)?(Array.isArray(t._data[s])||(t._data[s]=[t._data[s]]),t._data[s].push(e)):t._data[s]=e),t},u.decompressServiceWorkerData=function(e,t){var r;return t=t||{},"string"==typeof e&&(e=e.split(","),r=parseInt(e[0],36),t.workerStart=t.startTime+r,e[1]&&(t.fetchStart=t.startTime+parseInt(e[1],36))),t},u.decompressSpecialData=function(e,t,r){var s;return e&&0!==e.length&&(s=e[0],e=e.substring(1),s===u.SPECIAL_DATA_SIZE_TYPE?t=this.decompressSize(e,t):s===u.SPECIAL_DATA_SCRIPT_TYPE?t=this.decompressScriptType(e,t):s===u.SPECIAL_DATA_SERVERTIMING_TYPE?t=this.decompressServerTimingEntries(r,e,t):s===u.SPECIAL_DATA_LINK_ATTR_TYPE?t=this.decompressLinkAttrType(e,t):s===u.SPECIAL_DATA_NAMESPACED_TYPE?t=this.decompressNamespacedData(e,t):s===u.SPECIAL_DATA_SERVICE_WORKER_TYPE?t=this.decompressServiceWorkerData(e,t):s===u.SPECIAL_DATA_PROTOCOL&&(t=this.decompressNextHopProtocol(e,t))),t},u.reverseHostname=function(e){return e.replace(u.HOSTNAME_REGEX,function(e,t,r,s){return t+u.reverseString(r)+s})},u.reverseString=function(e){for(var t=e.length,r="";t--;)r+=e[t];return r},u.decompressServerTimingEntries=function(t,e,r){return void 0===r&&(r={}),t&&e&&(r.serverTiming=e.split(",").map(function(e){return this.decompressServerTiming(t,e)},this)),r},u.decompressServerTiming=function(e,t){var t=t.split(":"),r=Number(t[0]),s=0,n=0;1<t.length&&(""!==(t=t[1].split("."))[0]&&(s=Number(t[0])),1<t.length&&(n=Number(t[1])));var o,t="";return Array.isArray(e[s])?(o=e[s][0],t=e[s][1+n]||""):o=e[s],{name:o,duration:r,description:t}},u.decompressNextHopProtocol=function(e,t){return t=t||{},e?"h1"===e.substr(0,2)?t.nextHopProtocol=e.replace(/^h1/,"http/1"):t.nextHopProtocol=e:t.nextHopProtocol="",t},"function"==typeof define&&define.amd?define([],function(){return u}):"undefined"!=typeof module&&module.exports?module.exports=u:void 0!==t&&(t.ResourceTimingDecompression=u)}("undefined"!=typeof window?window:void 0);